<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" style="color:white;">Employee Manager</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarColor02">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" (click)="onOpenModal(null, 'add')">
          Add Employee
        </a>
      </li>
    </ul>

    <form class="form-inline my-2 my-lg-0">
      <input
  type="search"
  #key
  class="form-control mr-sm-2"
  placeholder="Search employees..."
  (input)="searchEmployees(key.value)">

    </form>
  </div>
</nav>

<div class="container" id="main-container">

  <!-- EMPLOYEE CARDS -->
  <div class="row" *ngIf="!isLoading && filteredEmployees.length > 0; else noEmployees"
>
    <div *ngFor="let employee of filteredEmployees" class="col-md-6 col-xl-3">
      <div class="card m-b-30">

        <div class="card-body row">
          <div class="col-6">
            <img
              [src]="employee.imageUrl"
              class="img-fluid rounded-circle w-60"
              alt="employee">
          </div>
          <div class="col-6 align-self-center">
            <h5>{{ employee.name }}</h5>
            <p class="m-0">{{ employee.jobTitle }}</p>
          </div>
        </div>

        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            {{ employee.email }}
          </li>
          <li class="list-group-item">
            Phone: {{ employee.phone }}
          </li>
        </ul>

        <div class="card-body text-right">
          <button
            class="btn btn-primary btn-sm"
            (click)="onOpenModal(employee, 'edit')">
            <i class="fa fa-pencil"></i>
          </button>

          <button
            class="btn btn-secondary btn-sm"
            (click)="onOpenModal(employee, 'delete')">
            <i class="fa fa-times"></i>
          </button>
        </div>

      </div>
    </div>
  </div>

  <!-- NO EMPLOYEES TEMPLATE -->
  <ng-template #noEmployees>
  <div *ngIf="!isLoading"
       class="alert alert-info text-center mt-4">
    <h4 class="alert-heading">NO EMPLOYEES!</h4>
    <p>No Employees were found.</p>
  </div>
</ng-template>


</div>


<!-- Add Employee Modal --> 
 <div class="modal fade" id="addEmployeeModal" tabindex="-1" role="dialog" aria-labelledby="addEmployeeModalLabel" aria-hidden="true"> 
    <div class="modal-dialog" role="document"> 
        <div class="modal-content"> 
            <div class="modal-header"> 
                <h5 class="modal-title" id="addEmployeeModalLabel">Add Employee</h5> 
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"> 
                    <span aria-hidden="true">&times;</span> 
                </button> 
            </div> 
            <div class="modal-body"> 
                <form #addForm="ngForm" (ngSubmit)="onAddEmloyee(addForm)"> 
                    <div class="form-group"> 
                        <label for="name">Name</label> 
                        <input type="text" ngModel name="name" class="form-control" id="name" placeholder="Name" required> 
                    </div> 
                    <div class="form-group"> 
                        <label for="email">Email Address</label> 
                        <input type="email" ngModel name="email" class="form-control" id="email" placeholder="Email" required> 
                    </div> 
                    <div class="form-group"> 
                        <label for="phone">Job title</label> 
                        <input type="text" ngModel name="jobTitle" class="form-control" id="jobTile" placeholder="Job title" required> 
                    </div> 
                    
                    <div class="form-group"> 
                        <label for="phone">Phone</label> 
                        <input type="text" ngModel name="phone" class="form-control" id="phone" placeholder="Phone" required> </div> 
                        <div class="form-group"> 
                            <label for="phone">Image URL</label> 
                            <input type="text" ngModel name="imageUrl" class="form-control" id="imageUrl" placeholder="Image URL" required> 
                        </div> 
                        <div class="modal-footer"> <button type="button" id="add-employee-form" class="btn btn-secondary" data-dismiss="modal">Close</button> 
                            <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary" >Save changes</button> 
                        </div> 
                    </form> 
                </div> 
            </div> 
        </div> 
    </div>

<!-- EDIT MODAL (FIXED ngModel bindings) -->
<div class="modal fade" id="updateEmployeeModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5>Edit Employee {{ editEmployee?.name }}</h5>
        <button class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div *ngIf="editEmployee">
      <div class="modal-body">
        <form #editForm="ngForm" (ngSubmit)="onUpdateEmloyee(editForm.value)">

          <input type="hidden" [ngModel]="editEmployee?.id" name="id">
          <input type="hidden" [ngModel]="editEmployee?.employeeCode" name="employeeCode">

          <div class="form-group">
            <label>Name</label>
            <input class="form-control"
              [ngModel]="editEmployee?.name"
              name="name">
          </div>

          <div class="form-group">
            <label>Email</label>
            <input class="form-control"
              [ngModel]="editEmployee?.email"
              name="email">
          </div>

          <div class="form-group">
            <label>Job Title</label>
            <input class="form-control"
              [ngModel]="editEmployee?.jobTitle"
              name="jobTitle">
          </div>

          <div class="form-group">
            <label>Phone</label>
            <input class="form-control"
              [ngModel]="editEmployee?.phone"
              name="phone">
          </div>

          <div class="form-group">
            <label>Image URL</label>
            <input class="form-control"
              [ngModel]="editEmployee?.imageUrl"
              name="imageUrl">
          </div>

          <div class="modal-footer">
            <button class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button class="btn btn-primary"
              (click)="onUpdateEmloyee(editForm.value)"
              data-dismiss="modal">
              Save
            </button>
          </div>

        </form>
      </div>
      </div>

    </div>
  </div>
</div>

<!-- DELETE MODAL (CORRECT) -->
<div class="modal fade" id="deleteEmployeeModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5>Delete Employee</h5>
      </div>

      <div class="modal-body">
        Are you sure you want to delete {{ deleteEmployee?.name }} ?
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-dismiss="modal">No</button>
        <button
          class="btn btn-danger"
        (click)="deleteEmployee && onDeleteEmployee(deleteEmployee.id)"
        data-dismiss="modal">
          Yes
        </button>


      </div>

    </div>
  </div>
</div>





